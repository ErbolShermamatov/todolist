const taskForm = document.getElementById('task-form');
const taskInput = document.getElementById('task-input');
const taskList = document.getElementById('task-list');
const darkModeBtn = document.getElementById('theme-toggle');

const loadTheme = () => {
    if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
        darkModeBtn.textContent = "‚òÄÔ∏è";
        darkModeBtn.style.background = '#fff';
    }
}
loadTheme();

const saveData = () => {
    //–ú—ã –±–µ—Ä–µ–º –≤–µ—Å—å HTML, –∫–æ—Ç–æ—Ä—ã–π –µ—Å—Ç—å —Å–µ–π—á–∞—Å –≤–Ω—É—Ç—Ä–∏ <ul>, –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
    localStorage.setItem('todoData', taskList.innerHTML);
}

const loadData = () => {
    //–í—ã–∑—ã–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    const savedHtml = localStorage.getItem("todoData");
    //–ï—Å–ª–∏ —Ç–∞–º —á—Ç–æ-—Ç–æ –µ—Å—Ç—å - –≤—Å—Ç–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ <ul>
    if (savedHtml) {
        taskList.innerHTML = savedHtml;
    }
}

darkModeBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
        darkModeBtn.textContent = "‚òÄÔ∏è";
        darkModeBtn.style.background = '#fff';
    }
    else {
        darkModeBtn.textContent = "üåô";
        darkModeBtn.style.background = '#333';
        localStorage.setItem('theme', 'light');
    }
})
taskForm.addEventListener('submit', (e) => {
    e.preventDefault();
    let inputText = taskInput.value; //—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é inputText, —Ç–æ —á—Ç–æ –≤–≤–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    if (inputText === '') { //–ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É, —Ç–æ –º—ã –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ
        return
    }
    const newLi = document.createElement('li'); //—Å–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
    newLi.classList.add('task'); ////–¥–æ–±–∞–≤–∏–ª–∏ –∫–ª–∞—Å—Å
    newLi.textContent = inputText;
    const deleteButton = document.createElement('button'); //—Å–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É
    deleteButton.classList.add('delete-btn'); //–¥–æ–±–∞–≤–∏–ª–∏ –∫–ª–∞—Å—Å –∫ –∫–Ω–æ–ø–∫–µ
    deleteButton.textContent = '–£–¥–∞–ª–∏—Ç—å';
    newLi.append(deleteButton); //–º—ã –ø–æ–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤–Ω—É—Ç—Ä—å li - —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
    taskList.append(newLi); //–∏ –ø–æ–º–µ—â–∞–µ–º —ç—Ç–æ—Ç li –≤ ul. –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ ul –±—É–¥–µ—Ç –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª–µ–º
    saveData(); //–í—ã–∑—ã–≤–∞–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫ –º–µ–Ω—è–µ—Ç—Å—è!
    taskInput.value = ''; //–æ—á–∏—Å—Ç–∏–ª–∏ –ø–æ–ª–µ –≤–≤–æ–¥–∞
})

taskList.addEventListener('click', (event) => {
    if (event.target.classList.contains('delete-btn')) {
        event.target.parentElement.remove()
    }
    else if (event.target.classList.contains('task')) {
        event.target.classList.toggle('done')
    }
    saveData(); //–í—ã–∑—ã–≤–∞–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫ –º–µ–Ω—è–µ—Ç—Å—è!
})

//–í—ã–∑—ã–≤–∞–µ–º loadData() –≤ —Å–∞–º–æ–º –Ω–∏–∑—É —Ñ–∞–π–ª–∞, —á—Ç–æ–±—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–∞–π—Ç–∞ –∑–∞–¥–∞—á–∏ —Å—Ä–∞–∑—É –ø–æ—è–≤–∏–ª–∏—Å—å
loadData();


/*
–¢–æ —á—Ç–æ –º—ã —Å–¥–µ–ª–∞–ª–∏ —Å–µ–π—á–∞—Å, –∞ –∏–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ innerHTML taskList –≤ localStorage –¥–ª—è –º–æ–µ–≥–æ —É—Ä–æ–≤–Ω—è —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
–û–Ω –ø—Ä–æ—Å—Ç–æ–π, –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–ù–æ –µ—Å—Ç—å –ø—Ä–∏—á–∏–Ω–∞ –ø–æ—á–µ–º—É –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã, —Ç–∞–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∞—é—Ç –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

–ê–Ω–∞–ª–æ–≥–∏—è: "–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"
–¢–≤–æ–π —Ç–µ–∫—É—â–∏–π –º–µ—Ç–æ–¥ (innerHTML): –¢—ã –Ω–∞–ø–∏—Å–∞–ª —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –Ω–∞ –±—É–º–∞–∂–∫–µ. –ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ, —Ç—ã —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–ª –±—É–º–∞–∂–∫—É –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω.
    –ü–ª—é—Å: –ë—ã—Å—Ç—Ä–æ. –ö–∞—Ä—Ç–∏–Ω–∫–∞ –µ—Å—Ç—å.
    –ú–∏–Ω—É—Å: –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –≤—ã—á–µ—Ä–∫–Ω—É—Ç—å "–ú–æ–ª–æ–∫–æ", —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —Ñ–æ—Ç–æ, –∑–∞—á–µ—Ä–∫–Ω—É—Ç—å –∏ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.
        –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É —Ç–æ–≤–∞—Ä–æ–≤ –∏–ª–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É - —Ç—ã –Ω–µ –º–æ–∂–µ—à—å, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ "–≥–ª—É–ø–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞" ("–°—Ç—Ä–æ–∫–∞ —Ç–µ–∫—Å—Ç–∞") 

–ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ô –ú–ï–¢–û–î (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤): –¢—ã –≤–µ–¥–µ—à—å —Å–ø–∏—Å–æ–∫ –≤ Excel –∏–ª–∏ –ó–∞–º–µ—Ç–∫–∞—Ö.

    –ü–ª—é—Å: –¢—ã —Ö—Ä–∞–Ω–∏—à—å –¥–∞–Ω–Ω—ã–µ. –¢—ã –º–æ–∂–µ—à—å –≤ –æ–¥–∏–Ω –∫–ª–∏–∫ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ —Ü–µ–Ω–µ. –¢—ã –º–æ–∂–µ—à—å —Å–∫—Ä—ã—Ç—å
    –≤—Å–µ –∫—É–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã. –¢—ã –º–æ–∂–µ—à—å –ø–æ—Å—á–∏—Ç–∞—Ç—å –æ–±—â—É—é —Å—É–º–º—É.

    –ú–∏–Ω—É—Å: —Å–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ –Ω–∞—á–∞–ª–µ.
*/

/*
    3 –ü—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É "–ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤" –∫—Ä—É—á–µ
    
    1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –î–∞–Ω–Ω—ã—Ö –∏ –ö–∞—Ä—Ç–∏–Ω–∫–∏ (Data vs View)
    –°–µ–π—á–∞—Å —Ç–≤–æ–π HTML ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å —Ç–≤–æ—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –∑–∞–∫–∞–∑—á–∏–∫ —Å–∫–∞–∂–µ—Ç: "–≠—Ä–±–æ–ª, –¥–æ–±–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ù–ï–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏".
        –° innerHTML: –¢–µ–±–µ –ø—Ä–∏–¥–µ—Ç—Å—è –ª–µ–∑—Ç—å –≤ —Å—Ç—Ä–æ–∫—É HTML, –∏—Å–∫–∞—Ç—å —Ç–∞–º –∫–ª–∞—Å—Å—ã done, –≤—ã—Ä–µ–∑–∞—Ç—å —ç—Ç–∏ –∫—É—Å–∫–∏ —Ç–µ–∫—Å—Ç–∞... –≠—Ç–æ –∞–¥.
        –° –ú–∞—Å—Å–∏–≤–æ–º: –¢—ã –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ—à—å todos.filter(t => t.done === false) –∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –≠—Ç–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ—á–∫–∞ –∫–æ–¥–∞.
    
    2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (XSS –∞—Ç–∞–∫–∏)
    –≠—Ç–æ –≤–∞–∂–Ω–æ. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–¥–µ—Ç –≤ —Ç–≤–æ–π –∏–Ω–ø—É—Ç —Ç–∞–∫–æ–π —Ç–µ–∫—Å—Ç: <img src=xoneerror=alert('Hacked')>,
    —Ç–æ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ innerHTML —ç—Ç–æ—Ç –∫–æ–¥ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ú–∞—Å—Å–∏–≤—ã –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ createElement
    –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —ç—Ç–æ–≥–æ, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–∫—Å—Ç –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è, –∫–∞–∫ —Ç–µ–∫—Å—Ç, –∞ –Ω–µ –∫–∞–∫ HTML-–∫–æ–¥

    3. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç React
    React —Ä–∞–±–æ—Ç–∞–µ—Ç –ò–°–ö–õ–Æ–ß–ò–¢–ï–õ–¨–ù–û –Ω–∞ –º–∞—Å—Å–∏–≤–∞—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –í React —Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ç—Ä–æ–≥–∞–µ—à—å innerHTML.
    –¢—ã –º–µ–Ω—è–µ—à—å –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤–µ, –∞ React —Å–∞–º –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É.
*/

/*

–¢–æ –µ—Å—Ç—å —É –Ω–∞—Å –≤—Å–µ —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ innerHTML. –ê –∏–º–µ–Ω–Ω–æ –º–µ—Ç–æ–¥—ã saveData –∏ loadData
–¢–æ –µ—Å—Ç—å –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π taskList.innerHTML –≤ localStorage –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º—ã –±–µ—Ä–µ–º —ç—Ç–æ—Ç innerHTML —Å localStorage
–∏ –≤—Å—Ç–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –ø—É—Å—Ç–æ–π taskList –∏ —É –Ω–∞—Å –±—É–¥–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã


–°–µ–π—á–∞—Å (–ù—ã–Ω–µ—à–Ω–∏–π –º–µ—Ç–æ–¥):
    1. –ú—ã —Å–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á—É -> –æ–Ω–∞ —Å—Ä–∞–∑—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è <li> (HTML-—Ç–µ–≥–æ–º)
    2. saveData –±–µ—Ä–µ—Ç —ç—Ç–æ—Ç HTML (<li>–ö—É–ø–∏—Ç—å —Ö–ª–µ–±</li>) –∏ —Ç—É–ø–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –∫–∞–∫ —Ç–µ–∫—Å—Ç.
    3. –¢–≤–æ–π —Å–∞–π—Ç "–ø–æ–º–Ω–∏—Ç" —Ç–æ–ª—å–∫–æ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥. –û–Ω –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —É –∑–∞–¥–∞—á–∏ –µ–≥–æ —Ç–µ–∫—Å—Ç "–ö—É–ø–∏—Ç—å —Ö–ª–µ–±". –û–Ω –ø—Ä–æ—Å—Ç–æ –∑–Ω–∞–µ—Ç –∫—É—Å–æ–∫ HTML-–∫–æ–¥–∞ (<li>–ö—É–ø–∏—Ç—å —Ö–ª–µ–±</li>)


–•–∞—Ä–¥–∫–æ—Ä–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (–ú–µ—Ç–æ–¥ –ø—Ä–æ—Ñ–∏):
    1. –ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–µ–≤–∏–¥–∏–º—ã–π —Å–ø–∏—Å–æ–∫ –≤ JS (–ú–∞—Å—Å–∏–≤):
    let todod = [
        {text: "–ö—É–ø–∏—Ç—å —Ö–ª–µ–±", done: false}
        {text: "–ü–æ—Å–ø–∞—Ç—å", done: true}
    ];

    2. saveData —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–µ HTML, –∞ —ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö (JSON.stringify).
    3. –ê HTML (<li>...<li>) –º—ã —Å—Ç—Ä–æ–∏–º –∑–∞–Ω–æ–≤–æ –∏–∑ —ç—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑.
 */

/*
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω—É–∂–µ–Ω –¥–ª—è React. –í–µ–¥—å –≤ React –∏ –≤–æ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ—Ä–µ–π–≤–æ—Ä–∫–∞—Ö –ó–ê–ü–†–ï–©–ï–ù–û —Å–æ—Ö—Ä–∞–Ω—è—Ç—å HTML.
–¢–∞–º –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ (–º–∞—Å—Å–∏–≤—ã, –æ–±—ä–µ–∫—Ç—ã).

*/

/*
–°–µ–π—á–∞—Å –Ω–∞—à saveData –∏ loadData —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–æ —Å innerHTML
–í localStorage –ª–µ–∂–∏—Ç "–≥–ª—É–ø–∞—è" —Å—Ç—Ä–æ–∫–∞ HTML. –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∞–º –Ω–∞–ø–∏—Å–∞–Ω–æ, –¥–ª—è –Ω–µ–≥–æ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–æ—Ä –±—É–∫–≤
"<li class='done'>–ö—É–ø–∏—Ç—å —Ö–ª–µ–±</li><li>–ü–æ—Å–ø–∞—Ç—å</li>"

–ó–∞–≤—Ç—Ä–∞ (03.12.25): –í localStorage –±—É–¥–µ—Ç –ª–µ–∂–∞—Ç—å –£–º–Ω—ã–π –ú–∞—Å—Å–∏–≤ (JSON). –≠—Ç–æ —á–∏—Å—Ç–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.

[
    { "text": "–ö—É–ø–∏—Ç—å —Ö–ª–µ–±", "done": true },
    { "text": "–ü–æ—Å–ø–∞—Ç—å", "done": false }
]
–í —á–µ–º –º–∞–≥–∏—è? –ú—ã –Ω–∞–ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –±—Ä–∞—Ç—å —ç—Ç–∏ "—Å—É—Ö–∏–µ –¥–∞–Ω–Ω—ã–µ" –∏ —Ä–∏—Å–æ–≤–∞—Ç—å –ø–æ –Ω–∏–º –∫—Ä–∞—Å–∏–≤—ã–π HTML.
    –ò–∑–º–µ–Ω–∏–ª –¥–∞–Ω–Ω—ã–µ -> –°–∞–π—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–ª—Å—è —Å–∞–º.
*/